<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Electric Power System - UpSat CUBEsat: Bootsequence_Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="lg.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Electric Power System - UpSat CUBEsat
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">firmware for the elctric power system of UPSAT-cubesat satellite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Bootsequence_Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab53e7a83de602916760ec8a7328a4b16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootsequence___functions.html#gab53e7a83de602916760ec8a7328a4b16">EPS_bootseq_poweroff_all_rails</a> (volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *state)</td></tr>
<tr class="memdesc:gab53e7a83de602916760ec8a7328a4b16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off all subsystem power rails. pmos mosfets are used so on startup the connected subsystems are powered up. This is something that all the subsystems must handle(soft delay on startup)  <a href="#gab53e7a83de602916760ec8a7328a4b16">More...</a><br/></td></tr>
<tr class="separator:gab53e7a83de602916760ec8a7328a4b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae0fe32313dbd8724dfc256810e5d7a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootsequence___functions.html#gaae0fe32313dbd8724dfc256810e5d7a3">EPS_bootseq_poweron_all_rails</a> (volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *state)</td></tr>
<tr class="memdesc:gaae0fe32313dbd8724dfc256810e5d7a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on all subsystems, except SU subsystem, with 50ms delay to avoid current spikes.  <a href="#gaae0fe32313dbd8724dfc256810e5d7a3">More...</a><br/></td></tr>
<tr class="separator:gaae0fe32313dbd8724dfc256810e5d7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb28d55e8dce0744c3716a0cec896698"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootsequence___functions.html#gadb28d55e8dce0744c3716a0cec896698">EPS_bootseq_umbilical_check</a> (volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *state)</td></tr>
<tr class="memdesc:gadb28d55e8dce0744c3716a0cec896698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check 10 times the umbilical pin and enter the appropriate mode.  <a href="#gadb28d55e8dce0744c3716a0cec896698">More...</a><br/></td></tr>
<tr class="separator:gadb28d55e8dce0744c3716a0cec896698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga318fb5dacc8fcb853b193250601bcc0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootsequence___functions.html#ga318fb5dacc8fcb853b193250601bcc0a">EPS_bootseq_enter_deployment_stage</a> (volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *state)</td></tr>
<tr class="memdesc:ga318fb5dacc8fcb853b193250601bcc0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check deployment status and if needed enter the appropriate state. A set of 7 keys are read from flash memory to verify if deployment has occurred. If any of them is already set, deployment has already happened and is skipped. If This is the first time or it has not complete deployment stage already once, The system waits for 30 minutes, deploys all deployable devices and writes the appropriate keys to flash memory.  <a href="#ga318fb5dacc8fcb853b193250601bcc0a">More...</a><br/></td></tr>
<tr class="separator:ga318fb5dacc8fcb853b193250601bcc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga318fb5dacc8fcb853b193250601bcc0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a> EPS_bootseq_enter_deployment_stage </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check deployment status and if needed enter the appropriate state. A set of 7 keys are read from flash memory to verify if deployment has occurred. If any of them is already set, deployment has already happened and is skipped. If This is the first time or it has not complete deployment stage already once, The system waits for 30 minutes, deploys all deployable devices and writes the appropriate keys to flash memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>the eps state structure containing central info of the EPS subsystem. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Error</td><td>status for handling and debugging. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab53e7a83de602916760ec8a7328a4b16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a> EPS_bootseq_poweroff_all_rails </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn off all subsystem power rails. pmos mosfets are used so on startup the connected subsystems are powered up. This is something that all the subsystems must handle(soft delay on startup) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>the eps state structure containing central info of the EPS subsystem. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Error</td><td>status for handling and debugging. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaae0fe32313dbd8724dfc256810e5d7a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a> EPS_bootseq_poweron_all_rails </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn on all subsystems, except SU subsystem, with 50ms delay to avoid current spikes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>the eps state structure containing central info of the EPS subsystem. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Error</td><td>status for handling and debugging.</td></tr>
  </table>
  </dd>
</dl>
<p>TODO: when recovering from startup should I turn on coms or turn only obc and wait for oobc to tell me to turn adcs and comms on? </p>

</div>
</div>
<a class="anchor" id="gadb28d55e8dce0744c3716a0cec896698"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__softerror.html#ga82875cd4cc1b94ab7e638961c1b79e08">EPS_soft_error_status</a> EPS_bootseq_umbilical_check </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="struct_e_p_s___state.html">EPS_State</a> *&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check 10 times the umbilical pin and enter the appropriate mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>the eps state structure containing central info of the EPS subsystem. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Error</td><td>status for handling and debugging. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 1 2016 19:15:28 for Electric Power System - UpSat CUBEsat by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
